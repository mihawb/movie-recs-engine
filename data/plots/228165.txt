Out on an island somewhere in Bikini Atoll, a pirate named Burger Beard steals an ancient, magical book that tells the story of SpongeBob SquarePants. He tells a small flock of seagulls the story, without interruption from them trying to sing the theme song.
Down in Bikini Bottom, Plankton makes yet another of his efforts to steal the Krabby Patty formula, by flying in on a World War II-style airplane. SpongeBob and Patrick protect the fort and launch a counterattack. However, Plankton eventually manages to breach the Krusty Krab's defenses in a giant robot. The robot malfunctions, Plankton doesn't have enough money for a bribe and, giving Mr. Krabs a penny, leaves in tears. Mr. Krabs goes out of the Krusty Krab to gloat while SpongeBob observes. Meanwhile, the real Plankton, who had been hiding in the penny, sneaks into Mr. Krabs' office and opens the safe to steal the formula, replacing it with a different piece of paper in a bottle. Unbeknownst to him, SpongeBob has decided to go back into Mr. Krabs' office to check on the formula and catches Plankton trying to steal it. Meanwhile Mr. Krabs discovers that the crying figure he thought was Plankton was actually a robot decoy and finds too late that the Krusty Krab has gone into lockdown. A struggle ensues between SpongeBob and Plankton for possession of the formula. Just then, the secret formula magically vanishes (thanks to Burger-Beard using the book to teleport it into his possession). SpongeBob and Plankton stand stock still, unable to believe what just happened. Mr. Krabs forces his way into the Krusty Krab and questions Plankton for the whereabouts of the formula. Plankton says he doesn't have it. Mr. Krabs doesn't believe him, and SpongeBob tells his boss that normally he wouldn't believe Plankton either but this time he's telling the truth. Mr. Krabs ignores SpongeBob's protests and tortures Plankton by taping him to his desk and making SpongeBob laugh so that Plankton would talk. The torture session is interrupted by Squidward, who comes in to tell Mr. Krabs that the customers are getting restless and asking for refunds. While Mr. Krabs is distracted, Plankton secretly escapes. Krabs sends SpongeBob to make more patties, but there are no more in the vault. Sandy bought the last ones. Mr. Krabs tells SpongeBob that he must have the formula memorized by now, but SpongeBob says that the formula may not be recorded in memory. Mr. Krabs rallies the town to pursue Plankton and corner him. He prepares to stomp on Plankton, but SpongeBob protects Plankton by putting him in a bubble. He steps inside the bubble and they float away.
Mr. Krabs laments SpongeBob being gone and proclaims that Bikini Bottom will plunge into chaos. True to his word, Bikini Bottom becomes a barren, apocalyptic wasteland.
Burger-Beard closes the book and decides it's the end of the story, and writes "The End" to prove his point. The seagulls are angry that he left the story on a cliffhanger, tear out the page Burger-Beard wrote "The End" on and dump it into the ocean.
Back in Bikini Bottom Patrick goes to the Krusty Krab and asks Squidward for a patty, but finds that they're all out. SpongeBob convinces Plankton that they should team up to find the secret formula and save the world. While Sandy is eating her Krabby Patties, to the distress of a very hungry Patrick, she watches the television and sees that Bikini Bottom is in chaos. As she is wondering what's going on, the page with "The End" written on it lands on her tree dome.
SpongeBob and Plankton go around Bikini Bottom looking for team members. They try Patrick first, but he quickly betrays them. Then they try to get Sandy on their team, but she's already gone mad from trying to figure out what the page with "The End" on it means. They go back to SpongeBob's house to get Gary on their team, but Gary is now the leader of a snail cult.
Alone together and on the run from an angry mob, SpongeBob and Plankton hide out on a cliff. Plankton gets SpongeBob to go to sleep, and the sponge does. Plankton jumps into one of SpongeBob's pores and goes into his brain to look for the secret formula. Instead he finds SpongeBob's dream: A saccharine world of living candy. Plankton runs screaming out of the dream, waking SpongeBob up in the process. Because Plankton is covered in cotton candy, SpongeBob catches on that Plankton has betrayed him. He sings a song about teamwork and then gives Plankton the idea that they should build a time machine to go back to the past and bring the formula to the present. They break into the Chum Bucket to break Karen out and use her to power the time machine. They go into a little restaurant called Taco HÃ¤us and build it. However, they make a mistake. They accidentally go one week into the future first and find that Bikini Bottom has become a desert, and Patrick is the only one for miles around. Then they accidentally go to a space station where a mystical dolphin named Bubbles has been watching the planets for ten thousand years. He gets SpongeBob and Plankton to watch the planets while Bubbles takes a bathroom break, but Saturn and Jupiter crash into each other. Bubbles gets angry and chases the two back into the time machine. Finally they go back to the moment when Plankton was stealing the formula, and SpongeBob manages to wrestle the bottle from Plankton's past self. On the surface, Burger-Beard sets up his own Krabby Patty stand on a coastal California town. Sandy comes into the Krusty Krab and announces that the research she's done leads her to conclude that the sandwich gods are angry with them (the 'The End' page had a picture of a burger on it). SpongeBob and Plankton arrive back at the present and find that they don't have the formula after all, but the decoy bottle that Plankton put in the place of the formula (which was a taunting note towards Mr. Krabs). SpongeBob and Plankton fall out and SpongeBob freaks out. He quickly collects himself and offers himself as a sacrifice to please the town. Instead of giving up their savage behavior for SpongeBob's sake, the town seizes him and tries to execute him by dropping a massive weight on him. While he's being executed, SpongeBob smells Krabby Patties, but nobody believes him. However, Mr. Krabs smells them too and saves SpongeBob at the last minute. The town tears off their apocalyptic clothes and follows the smell. To their dismay, it leads to the surface. Everyone except the main characters leaves. Squidward tries to go with them but Mr. Krabs insists he stay. Suddenly, Bubbles emerges, and announces he's been fired from his job as cosmic seer, but is happy about it because his job was boring.